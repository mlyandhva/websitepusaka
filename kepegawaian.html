<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Kepegawaian - PUSAKA BPS Lamongan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Halaman rekap kepegawaian PUSAKA BPS Lamongan" />
    <meta name="author" content="PUSAKA BPS Lamongan" />

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <!-- Bootstrap (project resource jika ada, fallback ke CDN jika ingin) -->
    <link rel="stylesheet" href="assets/css/bootstrap-5.0.0-beta1.min.css" />
    <link rel="stylesheet" href="assets/css/lindy-uikit.css" />

    <!-- Ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />

    <style>
      :root{
        --primary:#6a5af9;
        --soft1:#f5f6ff;
        --soft2:#e8eaff;
        --accent:#9a8cff;
        --card-bg: linear-gradient(145deg, #f7f8ff, #ffffff);
        --card-shadow: 0 8px 16px rgba(119, 130, 255, 0.12);

        /* Pastel Aurora grad colors */
        --aurora-top: rgba(130, 95, 255, 0.12);    /* ungu muda */
        --aurora-middle: rgba(255, 170, 230, 0.10);/* pink lembut */
        --aurora-bottom: rgba(190, 225, 255, 0.10);/* biru pastel */
      }

      /* Reset font */
      html, body { height: 100%; }
      body {
        /* NOTE: main page background is now a gentle aurora gradient.
           Content overlay remains unchanged and sits above this layer. */
        margin: 0;
        padding: 0;
        color: #2a2a2a;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(180deg, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0.9) 30%); /* fallback */
      }

      /* BACKGROUND AURORA + SPARKS (added) */
      .background-aurora {
        position: fixed;
        inset: 0;
        z-index: 0; /* behind content */
        pointer-events: none;
        overflow: hidden;
      }

      /* layered soft gradient for depth */
      .background-aurora::before {
        content: "";
        position: absolute;
        inset: -20% -10% -20% -10%;
        background:
          radial-gradient(40% 30% at 10% 20%, var(--aurora-top), transparent 20%),
          radial-gradient(45% 35% at 85% 30%, var(--aurora-middle), transparent 18%),
          radial-gradient(50% 40% at 50% 75%, var(--aurora-bottom), transparent 22%),
          linear-gradient(135deg, rgba(250,245,255,0.6), rgba(244,251,255,0.5));
        filter: blur(26px) saturate(110%);
        transform: translateZ(0);
        opacity: 0.95;
      }

      /* very subtle additional layer for softness */
      .background-aurora::after {
        content: "";
        position: absolute;
        inset: -10% -5% -10% -5%;
        background: linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0.08));
        mix-blend-mode: overlay;
        opacity: 0.7;
        transform: translateZ(0);
      }

      /* SPARKS (Medium density) */
      .aurora-sparks {
        position: absolute;
        inset: 0;
        z-index: 1;
        pointer-events: none;
      }

      .aurora-sparks .spark {
        position: absolute;
        border-radius: 50%;
        filter: blur(1.2px);
        background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0.6) 30%, rgba(255,255,255,0.0) 70%);
        opacity: 0.06; /* base opacity â€” will be varied inline via style for each spark */
        transform: translate3d(0,0,0);
        will-change: transform, opacity;
        mix-blend-mode: screen;
      }

      /* floating keyframes: gentle upward drift + slight x oscillation */
      @keyframes floatUp {
        0% { transform: translate3d(var(--dx, 0px), 30px, 0) scale(var(--s,1)); opacity: 0; }
        10% { opacity: var(--op, 0.08); }
        50% { transform: translate3d(calc(var(--dx, 0px) * -0.6), -40vh, 0) scale(calc(var(--s,1) * 1.05)); }
        90% { opacity: var(--op, 0.02); }
        100% { transform: translate3d(var(--dx, 0px), -48vh, 0) scale(var(--s,1)); opacity: 0; }
      }

      /* --- REST OF ORIGINAL CSS (untouched, but ensure content above bg) --- */

      /* put main content above background */
      header, main, footer, .navbar-wrapper, .dashboard-container, .rekap-space, .app-card, .sidebar {
        position: relative;
        z-index: 2; /* ensure content floats above aura layer */
      }

      .navbar-wrapper {
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(12px);
        border-radius: 20px;
        padding: 12px 18px;
        box-shadow: 0 4px 15px rgba(108, 43, 217, 0.08);
        margin: 20px auto;
        width: calc(100% - 40px);
        max-width: 1200px;
      }

      .navbar-top { display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap; }
      .navbar-title { font-weight: 700; color: #6c2bd9; font-size: 20px; margin:0; }
      .navbar-links { display:flex; gap:8px; flex-wrap:wrap; }
      .navbar-links a {
        text-decoration:none;
        color:#6c2bd9;
        font-weight:500;
        padding:7px 12px;
        border-radius:10px;
        background: rgba(108, 43, 217, 0.06);
        border:1px solid rgba(108,43,217,0.06);
      }
      .navbar-links a:hover { background: var(--primary); color: white; transform:translateY(-2px); }
      .navbar-links a.active { background: var(--primary); color: white; }

      .dashboard-container {
        display: flex;
        justify-content: space-between;
        gap: 20px;
        padding: 24px;
        align-items: flex-start;
        max-width: 1200px;
        margin: 0 auto 40px auto;
      }

      .main-content { flex: 3; min-width: 0; } /* min-width:0 untuk mencegah overflow flex */

      .main-content h2 {
        font-weight: 700;
        color: #2a2a2a;
        margin-bottom: 18px;
        font-size: 22px;
        text-align: center;
      }

      /* REKAP TABEL */
      .rekap-space {
        background: #fff;
        border-radius: 14px;
        padding: 16px;
        margin-bottom: 20px;
        position: relative;
        box-shadow: 0 4px 12px rgba(20,20,40,0.04);
      }

      .table-controls {
        display:flex;
        gap:10px;
        align-items:center;
        margin-bottom:12px;
        flex-wrap:wrap;
      }

      .table-controls button,
      .table-controls input[type="text"] {
        padding:6px 12px;
        font-size:14px;
        border-radius:8px;
        border:1px solid var(--primary);
        background: #fff;
        color: var(--primary);
        cursor:pointer;
      }
      .table-controls button:hover { background:var(--primary); color:#fff; }
      .table-controls input[type="text"] { border-color:#ddd; width:220px; }

      /* Kontainer tabel yang bisa di-zoom */
      #tableContainer {
        transform-origin: top left;
        transform: scale(0.80);
        transition: transform 0.22s ease;
        border-radius: 12px;
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.06);
        overflow: hidden;
        background: white;
      }

      #tableWrapper {
        max-height: 420px;
        overflow-y: auto;
      }

      table.pegawai-table {
        width:100%;
        border-collapse:collapse;
        min-width: 680px; /* biar kolom tetap rapi */
        font-size:13px;
      }

      table.pegawai-table th, table.pegawai-table td {
        padding:10px 12px;
        text-align:center;
        border-bottom: 1px solid #eee;
      }

      table.pegawai-table th {
        background: var(--primary);
        color: #fff;
        font-weight:600;
        position: sticky;
        top:0;
        z-index:2;
      }

      table.pegawai-table tbody tr:hover td { background:#fbf8ff; }

      /* GRID APLIKASI KIRI */
      .app-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
        margin-top: 18px;
      }

      .app-card {
        border-radius: 14px;
        padding: 16px;
        box-shadow: var(--card-shadow);
        text-align:left;
        transition: all 0.24s ease;
        color: #2a2a2a;
        background: var(--card-bg);
        display:flex;
        flex-direction:column;
        justify-content:space-between;
        min-height: 150px;
      }

      .app-card img { height:44px; width:auto; display:block; margin-bottom:10px; }
      .app-card h5 { margin:0 0 8px 0; font-size:15px; font-weight:600; color:#2f2f2f; }
      .app-card p { margin:0 0 12px 0; font-size:13px; color:#575757; min-height:48px; }
      .app-card .btn { align-self:flex-start; text-decoration:none; padding:8px 12px; border-radius:8px; background:var(--primary); color:#fff; font-size:13px; }

      .app-card:hover { transform: translateY(-6px); box-shadow: 0 18px 36px rgba(102,92,255,0.12); }

      /* SIDEBAR + KANAN (PERBAIKAN) */
      .right-column {
        display:flex;
        flex-direction:column;
        gap:18px;
        min-width: 280px;
        max-width: 360px;
        width: 100%;
      }

      .sidebar {
        background: linear-gradient(135deg, #fff8ff, #f0fbff, #fffdf0);
        border-radius: 14px;
        padding: 16px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.04);
        display:flex;
        flex-direction:column;
        align-items:center;
      }

      .illustration-card {
        width:100%;
        background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(250,248,255,0.95));
        border-radius:10px;
        padding:8px;
        display:flex;
        justify-content:center;
        align-items:center;
        box-shadow: 0 8px 20px rgba(106,90,250,0.04);
      }

      .sidebar-gif { width:100%; max-width:260px; height:auto; border-radius:8px; display:block; }

      .illustration-title { margin-top:10px; font-weight:600; color:#5b3db1; font-size:14px; text-align:center; }
      .badge-row { display:flex; gap:8px; margin-top:8px; flex-wrap:wrap; justify-content:center; }
      .badge { font-size:12px; padding:6px 10px; border-radius:999px; background: linear-gradient(90deg, rgba(106,90,250,0.12), rgba(154,140,255,0.08)); color:#4b318f; border:1px solid rgba(106,90,250,0.06); }

      .floating-shapes { position:relative; width:100%; height:60px; margin-top:10px; pointer-events:none; }
      .shape { position:absolute; border-radius:50%; opacity:0.14; filter: blur(6px); animation: floatTiny 5s ease-in-out infinite; }
      .shape.s1 { width:60px; height:60px; left:-8px; top:-10px; background:#ffd7f5; animation-delay:0s; }
      .shape.s2 { width:44px; height:44px; right:-6px; top:-6px; background:#e6f3ff; animation-delay:1.2s; }
      .shape.s3 { width:30px; height:30px; left:28%; top:-6px; background:#fff7d6; animation-delay:2.1s; }
      @keyframes floatTiny { 0% { transform: translateY(0) scale(0.98);} 50% { transform: translateY(-8px) scale(1.02);} 100% { transform: translateY(0) scale(0.98);} }

      .caption { margin-top:4px; font-size:13px; color:#6b57c9; text-align:center; }

      /* RIGHT EXTRA APPS :
         - ukuran sama seperti .app-card di kiri
         - gunakan grid sehingga bila tidak muat, akan turun rapi
         - gradasi warna pastel khusus pada area ini
      */
      .right-extra-apps {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 14px;
        width: 100%;
      }

      .right-extra-apps .app-card {
        background: linear-gradient(150deg, #fff4ff, #f5fbff, #faf5ff); /* gradasi pastel lembut */
        min-height: 140px;
        padding: 14px;
      }

      /* RESPONSIVE */
      @media (max-width: 1100px) {
        .dashboard-container { padding:18px; gap:14px; }
        .right-column { max-width: 320px; }
      }

      @media (max-width: 920px) {
        .dashboard-container { flex-direction: column; padding:14px; }
        .right-column { width: 100%; max-width: none; }
      }

      /* FOOTER */
      .footer { padding: 28px 0; text-align:center; background: transparent; margin-top: 8px; }
      .footer p { margin:0; color:#7a7a7a; font-size:13px; }

      /* small tweak: content wrapper should sit above background */
      .container, header, main { position: relative; z-index: 2; }
    </style>
  </head>

  <body>
    <!-- Background aurora + sparks (added) -->
    <div class="background-aurora" aria-hidden="true">
      <div class="aurora-sparks" id="auroraSparks"></div>
    </div>

    <!-- NAVBAR -->
  <main class="main-content">
  <div class="navbar-wrapper">
    <div class="navbar-top">

      <!-- LOGO + PUSAKA -->
      <div style="display:flex; align-items:center;">
        <img src="assets/img/logo/logo.png" class="navbar-title" alt="Logo BPS Lamongan" style="height:45px; margin:0; padding:0;">
        <span class="fw-bold fs-4" style="letter-spacing:1px; color:#3A4BFF;">PUSAKA</span>
      </div>

      <div class="navbar-links">
        <a href="index.html">Beranda</a>
        <a href="dashboard anggaran.html" >Dashboard Anggaran</a>
        <a href="keuangan.html">Keuangan</a>
        <a href="kepegawaian.html" class="active">Kepegawaian</a>
        <a href="download.html">Download KAK</a>
        <a href="kalender.html">Kalender Translok</a>
        <a href="kegiatan.html">Kegiatan</a>
      </div>

    </div>
  </div>
</header>


    <!-- MAIN CONTENT + RIGHT COLUMN -->
    <main>
      <section class="dashboard-container" aria-label="Konten utama dan sidebar">
        <!-- MAIN CONTENT -->
        <div class="main-content" role="main" aria-labelledby="titleRekap">
          <h2 id="titleRekap">Rekap Kepegawaian 2024</h2>

          <div class="rekap-space" role="region" aria-labelledby="titleRekapTable">
            <div class="table-controls" role="toolbar" aria-label="Kontrol tabel">
              <!-- <button id="zoomPlus" title="Perbesar tabel" aria-label="Perbesar tabel">+</button>
              <button id="zoomMinus" title="Perkecil tabel" aria-label="Perkecil tabel">âˆ’</button>  -->
              <input
                id="searchInput"
                type="text"
                placeholder="Cari data..."
                aria-label="Cari data pegawai"
              />
            </div>

            <div id="tableContainer" aria-hidden="false" role="region" aria-labelledby="titleRekapTable">
              <div id="tableWrapper">
                <table class="pegawai-table" role="table" aria-label="Tabel Data Kepegawaian" aria-describedby="titleRekapTable">
                  <caption id="titleRekapTable" style="caption-side:top; text-align:left; font-weight:600; padding:8px 0;">Tabel Rekap Kepegawaian</caption>
                  <thead>
                    <tr>
                      <th scope="col">NO</th>
                      <th scope="col">NAMA</th>
                      <th scope="col">GOL</th>
                      <th scope="col">2024</th>
                      <th scope="col">2025</th>
                      <th scope="col">2026</th>
                      <th scope="col">2027</th>
                      <th scope="col">2028</th>
                    </tr>
                  </thead>
                  <tbody id="dataPegawai">
                    <!-- Data akan diisi oleh script (Google Sheets / OpenSheet) -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- GRID APLIKASI (kiri) -->
          <div class="app-grid" aria-label="Aplikasi pendukung">
            <div class="app-card" role="article" aria-labelledby="appKippLabel">
              <img src="assets/img/clients/kipapp.png" alt="Logo KippAPP" />
              <h5 id="appKippLabel">KippAPP</h5>
              <p>KiPApp merupakan aplikasi berbasis web untuk mendukung penyelenggaraan sistem manajemen kinerja pegawai negeri sipil di lingkungan Badan Pusat Statistik.</p>
              <a href="https://kipapp.bps.go.id/#/auth/login" target="_blank" rel="noopener noreferrer" class="btn">Aplikasi</a>
            </div>

            <div class="app-card" role="article" aria-labelledby="appMajaLabel">
              <img src="assets/img/clients/majapahit.png" alt="Logo Majapahit" />
              <h5 id="appMajaLabel">Majapahit</h5>
              <p>Aplikasi ini mengatur pembagian tugas dari Ketua Tim ke Anggota Tim sehingga pekerjaan lebih terpantau.</p>
              <a href="https://www.majapah.it/" target="_blank" rel="noopener noreferrer" class="btn">Aplikasi</a>
            </div>

            <div class="app-card" role="article" aria-labelledby="appSimpegLabel">
              <img src="assets/img/clients/simpeg.png" alt="Logo SIMPEG" />
              <h5 id="appSimpegLabel">SIMPEG</h5>
              <p>Merupakan aplikasi yang berisi dokumen kepegawaian seperti SK, Sertifikat Pelatihan, KTP, NPWP, dan histori karir pegawai.</p>
              <a href="https://simpeg.bps.go.id/" target="_blank" rel="noopener noreferrer" class="btn">Aplikasi</a>
            </div>
            </div>
          </div>
        </div>

        <!-- RIGHT COLUMN: sidebar + app bawahnya (perbaikan sudah diterapkan) -->
        <aside class="right-column" role="complementary" aria-label="Sidebar dan aplikasi kanan">
          <div class="sidebar" aria-labelledby="sidebarTitle">
            <div class="illustration-card" aria-hidden="false">
              <img src="assets/img/animasihaii.gif" alt="Ilustrasi Animasi Tim" class="sidebar-gif" />
            </div>

            <div id="sidebarTitle" class="illustration-title">Haii</div>
            <div class="caption">Hai! Yuk lihat datanyaðŸ¤—</div>
          </div>

          <!-- RIGHT EXTRA APPS (DIUBAH SESUAI PERINTAH ANDA):
               - ukuran sama dengan .app-card
               - menggunakan grid agar otomatis turun bila tidak muat
               - gradasi warna pastel diterapkan
          -->
          <div class="right-extra-apps" aria-label="Aplikasi bawah sidebar">
            <div class="app-card" role="article" aria-labelledby="appDokLabel">
              <img src="assets/img/clients/dokumentasiarsip.png" alt="Logo Dokumentasi & Arsip" />
              <h5 id="appDokLabel">Dokumentasi & Arsip</h5>
              <p>Berisi dokumen dan arsip kegiatan BPS Kabupaten Lamongan, meliputi foto kegiatan dan laporan kegiatan.</p>
              <a href="https://drive.google.com/drive/folders/1TXPwj4hx1iWbr6mXXdN_6_l90uiV05kv" target="_blank" rel="noopener noreferrer" class="btn">Drive</a>
            </div>

            <div class="app-card" role="article" aria-labelledby="appSikLabel">
              <img src="assets/img/clients/sikelar.png" alt="Logo Sikelar" />
              <h5 id="appSikLabel">Sikelar</h5>
              <p>Sikelar adalah aplikasi penilaian kinerja harian pegawai secara mandiri, dengan konsep pelaporan waktu real-time.</p>
              <a href="https://sikelar.bps.go.id" target="_blank" rel="noopener noreferrer" class="btn">Aplikasi</a>
            </div>
          </div>
        </aside>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="footer" role="contentinfo" aria-label="Footer">
      <div class="container" style="max-width:1200px; margin:0 auto; padding:0 24px;">
        <p class="text-secondary small mb-0">Â© 2025 BPS Kabupaten Lamongan</p>
      </div>
    </footer>

    <!-- SCRIPTS -->
    <script>
      /**
       * Mengambil data dari Google Sheets via OpenSheet (opensource endpoint).
       * Pastikan spreadsheet bersifat public / shareable untuk reads agar Opensheet bekerja.
       * Jika tidak bisa, periksa hak akses spreadsheet.
       */
      async function fetchPegawai() {
        const sheetId = "1Ar3TNwUTYlGlo6lDOQFtpfK1UjRZsrFqXJ5INIuXTKA";
        const sheetName = "kepegawaian";
        const url = `https://opensheet.elk.sh/${sheetId}/${sheetName}`;

        try {
          const res = await fetch(url);
          if (!res.ok) throw new Error('HTTP ' + res.status);
          const data = await res.json();
          const tbody = document.getElementById("dataPegawai");
          tbody.innerHTML = "";

          if (!Array.isArray(data) || data.length === 0) {
            tbody.innerHTML = `<tr><td colspan="8">Tidak ada data</td></tr>`;
            return;
          }

          data.forEach((row, index) => {
            const nama = row.NAMA ?? row.nama ?? "";
            const gol = row.GOL ?? row.gol ?? "";
            const c2024 = row["2024"] ?? row._2024 ?? "";
            const c2025 = row["2025"] ?? row._2025 ?? "";
            const c2026 = row["2026"] ?? row._2026 ?? "";
            const c2027 = row["2027"] ?? row._2027 ?? "";
            const c2028 = row["2028"] ?? row._2028 ?? "";

            const tr = document.createElement("tr");
            tr.innerHTML = `
              <td>${index + 1}</td>
              <td>${escapeHtml(nama)}</td>
              <td>${escapeHtml(gol)}</td>
              <td>${escapeHtml(c2024)}</td>
              <td>${escapeHtml(c2025)}</td>
              <td>${escapeHtml(c2026)}</td>
              <td>${escapeHtml(c2027)}</td>
              <td>${escapeHtml(c2028)}</td>
            `;
            tbody.appendChild(tr);
          });
        } catch (error) {
          console.error("Gagal mengambil data pegawai:", error);
          const tbody = document.getElementById("dataPegawai");
          tbody.innerHTML = `<tr><td colspan="8">Gagal mengambil data</td></tr>`;
        }
      }

      // Simple escaping to avoid accidental HTML injection if sheet contains markup
      function escapeHtml(str) {
        if (str === null || str === undefined) return "";
        return String(str)
          .replaceAll("&", "&amp;")
          .replaceAll("<", "&lt;")
          .replaceAll(">", "&gt;")
          .replaceAll('"', "&quot;")
          .replaceAll("'", "&#039;");
      }

      // Inisialisasi panggilan fetch
      fetchPegawai();

      // Fitur zoom (manipulasi transform scale)
      (function () {
        let scale = 1.0; //untuk mengubah ukurann tabel
        const tableContainer = document.getElementById("tableContainer");
        const zoomPlus = document.getElementById("zoomPlus");
        const zoomMinus = document.getElementById("zoomMinus");

        function setScale(v) {
          scale = Math.max(0.5, Math.min(1.5, Number(v.toFixed(2))));
          tableContainer.style.transform = `scale(${scale})`;
        }

        zoomPlus && zoomPlus.addEventListener("click", () => {
          if (scale < 1.5) setScale(scale + 0.1);
        });

        zoomMinus && zoomMinus.addEventListener("click", () => {
          if (scale > 0.5) setScale(scale - 0.1);
        });

        // Inisialisasi awal supaya CSS dan JS konsisten
        setScale(scale);
      })();

      // Search / filter sederhana (case-insensitive)
      (function () {
        const input = document.getElementById("searchInput");
        input && input.addEventListener("input", function () {
          const q = this.value.toLowerCase().trim();
          const rows = document.querySelectorAll("#dataPegawai tr");
          if (!q) {
            rows.forEach(r => r.style.display = "");
            return;
          }
          rows.forEach(r => {
            const text = r.innerText.toLowerCase();
            r.style.display = text.includes(q) ? "" : "none";
          });
        });
      })();

      /* ---- AURORA SPARKS GENERATOR (Medium density) ----
         - This script creates multiple tiny "spark" nodes with randomized
           size, position, opacity, animation duration and horizontal drift.
         - It is deliberately lightweight and pointer-events are disabled.
      */
      (function createAuroraSparks() {
        const container = document.getElementById('auroraSparks');
        if (!container) return;

        const SPARK_COUNT = 28; // medium density
        const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
        const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

        for (let i = 0; i < SPARK_COUNT; i++) {
          const el = document.createElement('div');
          el.className = 'spark';

          // random size (in px) for subtle spark variety
          const size = Math.round(3 + Math.random() * 12); // 3px -> 15px
          // random initial left/top in percentage to be responsive
          const left = Math.random() * 100;
          const top = 60 + Math.random() * 40; // start lower half (so they float upwards)
          // small horizontal drift offset (px)
          const dx = (Math.random() * 180 - 90).toFixed(1) + 'px';
          // random opacity multiplier
          const op = (0.03 + Math.random() * 0.09).toFixed(3); // 0.03 - 0.12
          // speed/duration
          const dur = (10 + Math.random() * 14).toFixed(2); // 10s -> 24s
          // delay
          const delay = (-Math.random() * 12).toFixed(2); // negative to stagger initial positions
          // scale variance
          const s = (0.7 + Math.random() * 0.8).toFixed(2);

          el.style.width = `${size}px`;
          el.style.height = `${size}px`;
          el.style.left = `${left}%`;
          el.style.top = `${top}%`;
          el.style.opacity = op;
          el.style.setProperty('--dx', dx);
          el.style.setProperty('--op', op);
          el.style.setProperty('--s', s);
          el.style.setProperty('--size', `${size}px`);
          // CSS animation
          el.style.animation = `floatUp ${dur}s linear ${delay}s infinite`;
          // slight blur & mix
          el.style.filter = `blur(${Math.max(0.6, size * 0.06)}px)`;
          // make color subtle: mix of aurora hues via background (light)
          el.style.background = `radial-gradient(circle at 30% 30%, rgba(255,255,255,0.95), rgba(255,255,255,0.6) 30%, rgba(255,255,255,0.0) 70%)`;
          el.style.mixBlendMode = 'screen';
          container.appendChild(el);
        }

        // subtle responsiveness: reduce sparks on small screens for perf
        function adjustForScreen() {
          const small = window.innerWidth < 520;
          const nodes = container.children;
          for (let i = 0; i < nodes.length; i++) {
            nodes[i].style.display = small && i % 2 === 0 ? 'none' : '';
          }
        }
        window.addEventListener('resize', adjustForScreen, { passive: true });
        adjustForScreen();
      })();
    </script>
  </body>
</html>
